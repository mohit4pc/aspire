var viwcaio_atc=[];jQuery(document).ready((function(a){"use strict";if("undefined"==typeof viwcaio_ajax_atc_params)return!1;1==viwcaio_ajax_atc_params.ajax_atc&&jQuery(document).on("click","form:not(.woocommerce-boost-sales-cart-form) .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)",(function(t){t.preventDefault(),t.stopPropagation();let i=jQuery(this),o=jQuery(this).closest("form.cart");if(i.addClass("vi-wcaio-product-bt-atc-loading"),i.hasClass("disabled"))return i.removeClass("vi-wcaio-product-bt-atc-loading"),!1;if(o.hasClass(".variations_form")){let a=parseInt(o.find("input[name=variation_id]").val());if(!a||a<=0)return i.removeClass("vi-wcaio-product-bt-atc-loading"),!1}let e=o.find("input[name=product_id]").val();if(e||(e=o.find("[name=add-to-cart]").val()),!e||-1!==viwcaio_ajax_atc_params.ajax_atc_pd_exclude.indexOf(e)||o.find('[name="woopb-add-to-cart"]').length)return i.attr("type","submit").trigger("click"),!1;let c={},r="";if(o.find("select, textarea, input").each((function(){return!!a(this).prop("disabled")||(a(this).prop("required")&&!a(this).val()?(r=a(this).get(0).validationMessage||"Please fill the required fields.",a(this).get(0).setCustomValidity(""),a(this).trigger("focus"),!1):void 0)})),r)return alert(r),i.removeClass("vi-wcaio-product-bt-atc-loading"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1;c=new FormData(o[0]),c.get("add-to-cart")||c.set("add-to-cart",o.find("[name=add-to-cart]").val()),c.set("vicaio_nonce",viwcaio_ajax_atc_params.nonce),c.set("viwcaio_ajax_atc",1),viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:c,processData:!1,cache:!1,contentType:!1,beforeSend:function(a){i.removeClass("added").addClass("loading")},success:function(a){return a.error?(location.href=window.location.href,!1):"yes"===viwcaio_ajax_atc_params.cart_redirect_after_add?(window.location=viwcaio_ajax_atc_params.cart_url,!1):(jQuery(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,i]),viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||jQuery(document).trigger("viwcaio_after_update_cart",[a.fragments||{}]),jQuery(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,i]),viwcaio_atc.shift(),void(viwcaio_atc.length>0?jQuery.ajax(viwcaio_atc[0]):jQuery(document.body).trigger("update_checkout")))},complete:function(a){i.removeClass("loading vi-wcaio-product-bt-atc-loading").addClass("added")}}),1===viwcaio_atc.length&&jQuery.ajax(viwcaio_atc[0])})),jQuery(document).on("click",".vi-wcaio-product-bt-atc:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-not-atc):not(.vi-wcaio-product-bt-atc-loading):not(.vi-wcaio-product-bt-atc-non-ajax)",(function(a){a.preventDefault(),a.stopPropagation();let t=jQuery(this),i=jQuery(this).closest(".vi-wcaio-va-cart-form");t.addClass("vi-wcaio-product-bt-atc-loading").removeClass("added");let o=!0;if(i.find(".vi-wcaio-attribute-options").each((function(a,t){if(!jQuery(t).val())return o=!1,!1})),!o)return jQuery(".vi-wcaio-warning-wrap").length?jQuery(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_make_a_selection_text):jQuery("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_make_a_selection_text+"</div>"),setTimeout((function(){jQuery(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")}),2e3),t.removeClass("vi-wcaio-product-bt-atc-loading"),!1;if(t.hasClass("vi-wcaio-button-swatches-disable")||t.hasClass("vi-wcaio-product-bt-atc-disabled"))return jQuery(".vi-wcaio-warning-wrap").length?jQuery(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_unavailable_text):jQuery("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_unavailable_text+"</div>"),setTimeout((function(){jQuery(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")}),2e3),t.removeClass("vi-wcaio-product-bt-atc-loading"),!1;i.hasClass("vi-wcaio-va-cart-form")&&t.data("quantity",i.find("input.vi-wcaio-va-qty-input").val()||0);let e=i.find("select, input").serialize();-1===e.search("vicaio_nonce")&&(e+="&vicaio_nonce="+viwcaio_ajax_atc_params.nonce),viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:e,beforeSend:function(a){i.addClass("vi-wcaio-va-cart-form-loading")},success:function(a){return a.error?(location.href=window.location.href,!1):"yes"===viwcaio_ajax_atc_params.cart_redirect_after_add?(window.location=viwcaio_ajax_atc_params.cart_url,!1):(jQuery(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t]),viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||jQuery(document).trigger("viwcaio_after_update_cart",[a.fragments||{}]),jQuery(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,t]),viwcaio_atc.shift(),void(viwcaio_atc.length>0?jQuery.ajax(viwcaio_atc[0]):jQuery(document.body).trigger("update_checkout")))},complete:function(a){t.removeClass("vi-wcaio-product-bt-atc-loading"),i.closest(".vi-wcaio-va-cart-form-wrap-wrap").remove()}}),1===viwcaio_atc.length&&jQuery.ajax(viwcaio_atc[0])}))}));